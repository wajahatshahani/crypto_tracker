<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoTracker Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse-green {
            animation: pulseGreen 2s infinite;
        }
        .pulse-red {
            animation: pulseRed 2s infinite;
        }
        @keyframes pulseGreen {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
        }
        @keyframes pulseRed {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }
        .crypto-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .btc-gradient {
            background: linear-gradient(135deg, #f7931e 0%, #ff6b35 100%);
        }
        .eth-gradient {
            background: linear-gradient(135deg, #627eea 0%, #3c4fe0 100%);
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-full font-sans">
    <div class="min-h-full">
        <!-- Header -->
        <header class="bg-gray-800 shadow-2xl border-b border-gray-700">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 crypto-card rounded-full flex items-center justify-center mr-4">
                            <span class="text-white font-bold text-xl">₿</span>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold text-white">CryptoTracker Pro</h1>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-400" id="lastUpdate">Last updated: --</div>
                        <div class="text-xs text-gray-500 mt-1">Auto-refresh: <span id="countdown">30</span>s</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-gray-800 border-b border-gray-700">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-8 py-4">
                    <button onclick="showSection('dashboard')" class="nav-btn px-4 py-2 rounded-lg font-medium transition-colors bg-blue-600 text-white">Dashboard</button>
                    <button onclick="showSection('analysis')" class="nav-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700">Analysis</button>
                    <button onclick="showSection('portfolio')" class="nav-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700">Portfolio</button>
                    <button onclick="showSection('alerts')" class="nav-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700">Alerts</button>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Dashboard Section -->
            <div id="dashboard" class="section fade-in">
                <h2 class="text-2xl font-bold text-white mb-6">Market Overview</h2>
                
                <!-- Price Cards -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Bitcoin Card -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 btc-gradient rounded-full flex items-center justify-center mr-4">
                                    <span class="text-white font-bold text-lg">₿</span>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white">Bitcoin</h3>
                                    <p class="text-gray-400 text-sm">BTC</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-white" id="btcPrice">$--,---</div>
                                <div class="text-sm" id="btcChange">--%</div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="bg-gray-700 rounded-lg p-3">
                                <p class="text-gray-400 text-xs">24h High</p>
                                <p class="text-white font-semibold" id="btcHigh">$--,---</p>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-3">
                                <p class="text-gray-400 text-xs">24h Low</p>
                                <p class="text-white font-semibold" id="btcLow">$--,---</p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 rounded-lg p-3">
                            <p class="text-gray-400 text-xs">Market Cap</p>
                            <p class="text-white font-semibold" id="btcMarketCap">$---.--B</p>
                        </div>
                    </div>

                    <!-- Ethereum Card -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 eth-gradient rounded-full flex items-center justify-center mr-4">
                                    <span class="text-white font-bold text-lg">Ξ</span>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white">Ethereum</h3>
                                    <p class="text-gray-400 text-sm">ETH</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-white" id="ethPrice">$--,---</div>
                                <div class="text-sm" id="ethChange">--%</div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="bg-gray-700 rounded-lg p-3">
                                <p class="text-gray-400 text-xs">24h High</p>
                                <p class="text-white font-semibold" id="ethHigh">$--,---</p>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-3">
                                <p class="text-gray-400 text-xs">24h Low</p>
                                <p class="text-white font-semibold" id="ethLow">$--,---</p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 rounded-lg p-3">
                            <p class="text-gray-400 text-xs">Market Cap</p>
                            <p class="text-white font-semibold" id="ethMarketCap">$---.--B</p>
                        </div>
                    </div>
                </div>

                <!-- Time Range Controls -->
                <div class="mb-6 bg-gray-800 rounded-2xl shadow-2xl p-4 border border-gray-700">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <h3 class="text-lg font-semibold text-white">Chart Time Range</h3>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="changeTimeRange('1h')" class="time-btn px-4 py-2 rounded-lg font-medium transition-colors bg-blue-600 text-white text-sm">1H</button>
                            <button onclick="changeTimeRange('4h')" class="time-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700 text-sm">4H</button>
                            <button onclick="changeTimeRange('24h')" class="time-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700 text-sm">24H</button>
                            <button onclick="changeTimeRange('7d')" class="time-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700 text-sm">7D</button>
                            <button onclick="changeTimeRange('30d')" class="time-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-300 hover:text-white hover:bg-gray-700 text-sm">30D</button>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">Bitcoin Price Chart</h3>
                            <span class="text-sm text-gray-400" id="btcTimeRange">Last 1 Hour</span>
                        </div>
                        <div class="relative h-64 w-full">
                            <canvas id="btcChart"></canvas>
                        </div>
                        <div class="mt-3 p-3 bg-gray-700 rounded-lg">
                            <div class="text-xs text-gray-400" id="btcCursorInfo">Hover over chart to see detailed data</div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">Ethereum Price Chart</h3>
                            <span class="text-sm text-gray-400" id="ethTimeRange">Last 1 Hour</span>
                        </div>
                        <div class="relative h-64 w-full">
                            <canvas id="ethChart"></canvas>
                        </div>
                        <div class="mt-3 p-3 bg-gray-700 rounded-lg">
                            <div class="text-xs text-gray-400" id="ethCursorInfo">Hover over chart to see detailed data</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analysis Section -->
            <div id="analysis" class="section hidden">
                <h2 class="text-2xl font-bold text-white mb-6">Technical Analysis</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Market Sentiment -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Market Sentiment</h3>
                        <div class="text-center">
                            <div class="w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4" id="sentimentCircle">
                                <span class="text-2xl font-bold" id="sentimentScore">75</span>
                            </div>
                            <p class="text-gray-400 text-sm" id="sentimentLabel">Greed</p>
                            <p class="text-xs text-gray-500 mt-2">Fear & Greed Index</p>
                        </div>
                    </div>

                    <!-- Bitcoin Analysis -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Bitcoin Signals</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">RSI (14)</span>
                                <span class="text-yellow-400 font-semibold" id="btcRSI">65.2</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">Support</span>
                                <span class="text-green-400 font-semibold" id="btcSupport">$42,500</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">Resistance</span>
                                <span class="text-red-400 font-semibold" id="btcResistance">$45,800</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">Signal</span>
                                <span class="text-green-400 font-semibold" id="btcSignal">BULLISH</span>
                            </div>
                        </div>
                    </div>

                    <!-- Ethereum Analysis -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Ethereum Signals</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">RSI (14)</span>
                                <span class="text-yellow-400 font-semibold" id="ethRSI">58.7</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">Support</span>
                                <span class="text-green-400 font-semibold" id="ethSupport">$2,450</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">Resistance</span>
                                <span class="text-red-400 font-semibold" id="ethResistance">$2,680</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                <span class="text-gray-300">Signal</span>
                                <span class="text-green-400 font-semibold" id="ethSignal">BULLISH</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Predictions -->
                <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Bitcoin Predictions -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">🤖 Bitcoin AI Predictions</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Next 1 Hour</span>
                                    <span class="font-semibold text-white" id="btcPred1h">$--,---</span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Next 24 Hours</span>
                                    <span class="font-semibold text-white" id="btcPred24h">$--,---</span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Next 7 Days</span>
                                    <span class="font-semibold text-white" id="btcPred7d">$--,---</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-300">AI Confidence</span>
                                    <span class="font-semibold text-blue-400" id="btcConfidence">--%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ethereum Predictions -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">🤖 Ethereum AI Predictions</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Next 1 Hour</span>
                                    <span class="font-semibold text-white" id="ethPred1h">$--,---</span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Next 24 Hours</span>
                                    <span class="font-semibold text-white" id="ethPred24h">$--,---</span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Next 7 Days</span>
                                    <span class="font-semibold text-white" id="ethPred7d">$--,---</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-300">AI Confidence</span>
                                    <span class="font-semibold text-blue-400" id="ethConfidence">--%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market News -->
                <div class="mt-8 bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                    <h3 class="text-lg font-semibold text-white mb-4">Market Insights</h3>
                    <div class="space-y-4" id="marketNews">
                        <div class="p-4 bg-gray-700 rounded-lg border-l-4 border-green-500">
                            <h4 class="font-semibold text-white mb-2">Bitcoin Shows Strong Support</h4>
                            <p class="text-gray-300 text-sm">Technical indicators suggest BTC is holding above key support levels with increasing volume.</p>
                            <p class="text-gray-500 text-xs mt-2">2 hours ago</p>
                        </div>
                        <div class="p-4 bg-gray-700 rounded-lg border-l-4 border-blue-500">
                            <h4 class="font-semibold text-white mb-2">Ethereum Network Activity Rising</h4>
                            <p class="text-gray-300 text-sm">On-chain metrics show increased transaction volume and network utilization.</p>
                            <p class="text-gray-500 text-xs mt-2">4 hours ago</p>
                        </div>
                        <div class="p-4 bg-gray-700 rounded-lg border-l-4 border-yellow-500">
                            <h4 class="font-semibold text-white mb-2">Market Volatility Expected</h4>
                            <p class="text-gray-300 text-sm">Traders should prepare for potential price swings as market sentiment shifts.</p>
                            <p class="text-gray-500 text-xs mt-2">6 hours ago</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Portfolio Section -->
            <div id="portfolio" class="section hidden">
                <h2 class="text-2xl font-bold text-white mb-6">Portfolio Tracker</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Add Holdings -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Add Holdings</h3>
                        <form onsubmit="addHolding(event)" class="space-y-4">
                            <div>
                                <label for="cryptoSelect" class="block text-sm font-medium text-gray-300 mb-2">Cryptocurrency</label>
                                <select id="cryptoSelect" name="cryptoSelect" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500" required>
                                    <option value="">Select crypto</option>
                                    <option value="BTC">Bitcoin (BTC)</option>
                                    <option value="ETH">Ethereum (ETH)</option>
                                </select>
                            </div>
                            <div>
                                <label for="amount" class="block text-sm font-medium text-gray-300 mb-2">Amount</label>
                                <input type="number" id="amount" name="amount" step="0.00000001" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500" placeholder="0.1" required>
                            </div>
                            <div>
                                <label for="buyPrice" class="block text-sm font-medium text-gray-300 mb-2">Buy Price ($)</label>
                                <input type="number" id="buyPrice" name="buyPrice" step="0.01" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500" placeholder="43000" required>
                            </div>
                            <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium">Add to Portfolio</button>
                        </form>
                    </div>

                    <!-- Portfolio Summary -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Portfolio Summary</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <p class="text-gray-400 text-sm">Total Value</p>
                                <p class="text-2xl font-bold text-white" id="totalValue">$0.00</p>
                            </div>
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <p class="text-gray-400 text-sm">Total P&L</p>
                                <p class="text-xl font-bold" id="totalPnL">$0.00 (0.00%)</p>
                            </div>
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <p class="text-gray-400 text-sm">Best Performer</p>
                                <p class="text-white font-semibold" id="bestPerformer">--</p>
                            </div>
                        </div>
                    </div>

                    <!-- Holdings List -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Your Holdings</h3>
                        <div id="holdingsList" class="space-y-3">
                            <p class="text-gray-400 text-center py-8">No holdings yet. Add some crypto to get started!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alerts Section -->
            <div id="alerts" class="section hidden">
                <h2 class="text-2xl font-bold text-white mb-6">Price Alerts</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Create Alert -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Create Price Alert</h3>
                        <form onsubmit="createAlert(event)" class="space-y-4">
                            <div>
                                <label for="alertCrypto" class="block text-sm font-medium text-gray-300 mb-2">Cryptocurrency</label>
                                <select id="alertCrypto" name="alertCrypto" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500" required>
                                    <option value="">Select crypto</option>
                                    <option value="BTC">Bitcoin (BTC)</option>
                                    <option value="ETH">Ethereum (ETH)</option>
                                </select>
                            </div>
                            <div>
                                <label for="alertType" class="block text-sm font-medium text-gray-300 mb-2">Alert Type</label>
                                <select id="alertType" name="alertType" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500" required>
                                    <option value="">Select type</option>
                                    <option value="above">Price Above</option>
                                    <option value="below">Price Below</option>
                                </select>
                            </div>
                            <div>
                                <label for="alertPrice" class="block text-sm font-medium text-gray-300 mb-2">Target Price ($)</label>
                                <input type="number" id="alertPrice" name="alertPrice" step="0.01" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500" placeholder="45000" required>
                            </div>
                            <button type="submit" class="w-full bg-yellow-600 text-white py-2 px-4 rounded-lg hover:bg-yellow-700 transition-colors font-medium">Create Alert</button>
                        </form>
                    </div>

                    <!-- Active Alerts -->
                    <div class="bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Active Alerts</h3>
                        <div id="alertsList" class="space-y-3">
                            <p class="text-gray-400 text-center py-8">No active alerts. Create one to get notified!</p>
                        </div>
                    </div>
                </div>

                <!-- Alert History -->
                <div class="mt-8 bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-700">
                    <h3 class="text-lg font-semibold text-white mb-4">Recent Notifications</h3>
                    <div id="alertHistory" class="space-y-3">
                        <p class="text-gray-400 text-center py-8">No notifications yet.</p>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="text-right p-4">
            <p class="text-gray-500 text-xs">© 2024 wajahataleeofficial</p>
        </footer>
    </div>

    <script>
        // Global variables
        let cryptoData = {
            BTC: { price: 0, change: 0, high: 0, low: 0, marketCap: 0, volume: 0 },
            ETH: { price: 0, change: 0, high: 0, low: 0, marketCap: 0, volume: 0 }
        };
        
        let predictions = {
            BTC: { next1h: 0, next24h: 0, next7d: 0, confidence: 0, trend: 'neutral' },
            ETH: { next1h: 0, next24h: 0, next7d: 0, confidence: 0, trend: 'neutral' }
        };
        
        let portfolio = [];
        let alerts = [];
        let priceHistory = { BTC: [], ETH: [] };
        let historicalData = { BTC: [], ETH: [] };
        let btcChart, ethChart;
        let updateInterval;
        let countdownInterval;
        let currentTimeRange = '1h';
        let chartDataPoints = { '1h': 60, '4h': 48, '24h': 24, '7d': 168, '30d': 720 };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            initializeCharts();
            fetchCryptoData();
            startAutoUpdate();
            updateSentiment();
        });

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');
            document.getElementById(sectionName).classList.add('fade-in');
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('text-gray-300');
            });
            
            event.target.classList.add('bg-blue-600', 'text-white');
            event.target.classList.remove('text-gray-300');
        }

        async function fetchCryptoData() {
            try {
                // Fetch live data from CoinGecko API (free, no API key required)
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true&include_market_cap=true');
                const data = await response.json();
                
                if (data.bitcoin && data.ethereum) {
                    cryptoData.BTC = {
                        price: data.bitcoin.usd,
                        change: data.bitcoin.usd_24h_change || 0,
                        high: data.bitcoin.usd * (1 + Math.abs(data.bitcoin.usd_24h_change || 2) / 200),
                        low: data.bitcoin.usd * (1 - Math.abs(data.bitcoin.usd_24h_change || 2) / 200),
                        marketCap: data.bitcoin.usd_market_cap / 1000000000,
                        volume: data.bitcoin.usd_24h_vol / 1000000000
                    };
                    
                    cryptoData.ETH = {
                        price: data.ethereum.usd,
                        change: data.ethereum.usd_24h_change || 0,
                        high: data.ethereum.usd * (1 + Math.abs(data.ethereum.usd_24h_change || 2) / 200),
                        low: data.ethereum.usd * (1 - Math.abs(data.ethereum.usd_24h_change || 2) / 200),
                        marketCap: data.ethereum.usd_market_cap / 1000000000,
                        volume: data.ethereum.usd_24h_vol / 1000000000
                    };
                    
                    // Generate AI predictions based on real data
                    generateAIPredictions();
                } else {
                    throw new Error('Invalid API response');
                }
            } catch (error) {
                console.error('Error fetching crypto data:', error);
                // Fallback to simulated data if API fails
                const btcBasePrice = 43500 + Math.random() * 2000;
                const ethBasePrice = 2600 + Math.random() * 200;
                
                cryptoData.BTC = {
                    price: btcBasePrice,
                    change: (Math.random() - 0.5) * 10,
                    high: btcBasePrice + Math.random() * 500,
                    low: btcBasePrice - Math.random() * 500,
                    marketCap: btcBasePrice * 19.5 / 1000000000,
                    volume: Math.random() * 20
                };
                
                cryptoData.ETH = {
                    price: ethBasePrice,
                    change: (Math.random() - 0.5) * 8,
                    high: ethBasePrice + Math.random() * 100,
                    low: ethBasePrice - Math.random() * 100,
                    marketCap: ethBasePrice * 120 / 1000000000,
                    volume: Math.random() * 15
                };
                
                generateAIPredictions();
                showNotification('Using demo data - API temporarily unavailable', 'warning');
            }
            
            updatePriceDisplay();
            updateCharts();
            checkAlerts();
            updatePortfolio();
            updateAnalysis();
            
            document.getElementById('lastUpdate').textContent = `Last updated: ${new Date().toLocaleTimeString()}`;
        }

        function updatePriceDisplay() {
            // Bitcoin
            document.getElementById('btcPrice').textContent = `$${cryptoData.BTC.price.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('btcHigh').textContent = `$${cryptoData.BTC.high.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('btcLow').textContent = `$${cryptoData.BTC.low.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('btcMarketCap').textContent = `$${cryptoData.BTC.marketCap.toFixed(1)}B`;
            
            const btcChangeEl = document.getElementById('btcChange');
            btcChangeEl.textContent = `${cryptoData.BTC.change >= 0 ? '+' : ''}${cryptoData.BTC.change.toFixed(2)}%`;
            btcChangeEl.className = cryptoData.BTC.change >= 0 ? 'text-green-400' : 'text-red-400';
            
            // Ethereum
            document.getElementById('ethPrice').textContent = `$${cryptoData.ETH.price.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('ethHigh').textContent = `$${cryptoData.ETH.high.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('ethLow').textContent = `$${cryptoData.ETH.low.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            document.getElementById('ethMarketCap').textContent = `$${cryptoData.ETH.marketCap.toFixed(1)}B`;
            
            const ethChangeEl = document.getElementById('ethChange');
            ethChangeEl.textContent = `${cryptoData.ETH.change >= 0 ? '+' : ''}${cryptoData.ETH.change.toFixed(2)}%`;
            ethChangeEl.className = cryptoData.ETH.change >= 0 ? 'text-green-400' : 'text-red-400';
        }

        function initializeCharts() {
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                onHover: (event, activeElements, chart) => {
                    const crypto = chart.canvas.id === 'btcChart' ? 'BTC' : 'ETH';
                    const infoElement = document.getElementById(crypto.toLowerCase() + 'CursorInfo');
                    
                    if (activeElements.length > 0) {
                        const dataIndex = activeElements[0].index;
                        const price = chart.data.datasets[0].data[dataIndex];
                        const timestamp = chart.data.labels[dataIndex];
                        const fullTimestamp = chart.data.fullTimestamps ? chart.data.fullTimestamps[dataIndex] : timestamp;
                        
                        // Calculate trend from previous point
                        let trendIndicator = '';
                        let trendClass = '';
                        if (dataIndex > 0) {
                            const prevPrice = chart.data.datasets[0].data[dataIndex - 1];
                            const change = price - prevPrice;
                            const changePercent = ((change / prevPrice) * 100);
                            
                            if (change > 0) {
                                trendIndicator = `+$${change.toFixed(2)} (+${changePercent.toFixed(2)}%)`;
                                trendClass = 'text-green-400';
                            } else if (change < 0) {
                                trendIndicator = `-$${Math.abs(change).toFixed(2)} (${changePercent.toFixed(2)}%)`;
                                trendClass = 'text-red-400';
                            } else {
                                trendIndicator = '$0.00 (0.00%)';
                                trendClass = 'text-gray-400';
                            }
                        }
                        
                        infoElement.innerHTML = `
                            <div class="space-y-1">
                                <div class="flex justify-between items-center">
                                    <span class="text-white font-semibold">Price: $${price.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>
                                    <span class="text-gray-300">Time: ${fullTimestamp}</span>
                                </div>
                                ${trendIndicator ? `<div class="text-right"><span class="${trendClass} font-medium">${trendIndicator}</span></div>` : ''}
                            </div>
                        `;
                    } else {
                        infoElement.innerHTML = 'Hover over chart to see detailed data';
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        borderColor: 'rgba(255, 255, 255, 0.2)',
                        borderWidth: 1,
                        cornerRadius: 8,
                        displayColors: false,
                        callbacks: {
                            title: function(context) {
                                const chart = context[0].chart;
                                const dataIndex = context[0].dataIndex;
                                return chart.data.fullTimestamps ? chart.data.fullTimestamps[dataIndex] : context[0].label;
                            },
                            label: function(context) {
                                const price = context.parsed.y;
                                const crypto = context.chart.canvas.id === 'btcChart' ? 'Bitcoin' : 'Ethereum';
                                const dataIndex = context.dataIndex;
                                
                                let trendText = '';
                                if (dataIndex > 0) {
                                    const prevPrice = context.chart.data.datasets[0].data[dataIndex - 1];
                                    const change = price - prevPrice;
                                    const changePercent = ((change / prevPrice) * 100);
                                    
                                    if (change > 0) {
                                        trendText = ` (+$${change.toFixed(2)}, +${changePercent.toFixed(2)}%)`;
                                    } else if (change < 0) {
                                        trendText = ` (-$${Math.abs(change).toFixed(2)}, ${changePercent.toFixed(2)}%)`;
                                    }
                                }
                                
                                return `${crypto}: $${price.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}${trendText}`;
                            }
                        }
                    }
                },
                scales: {
                    x: { 
                        display: true,
                        grid: { 
                            display: true,
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.6)',
                            maxTicksLimit: 8,
                            callback: function(value, index) {
                                const label = this.getLabelForValue(value);
                                return currentTimeRange === '7d' || currentTimeRange === '30d' ? 
                                    label.split(' ')[0] : label; // Show only date for longer ranges
                            }
                        }
                    },
                    y: { 
                        display: true,
                        position: 'right',
                        grid: { 
                            display: true,
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.6)',
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        }
                    }
                },
                elements: {
                    point: { 
                        radius: 2,
                        hoverRadius: 6,
                        backgroundColor: 'white',
                        borderWidth: 2
                    },
                    line: { 
                        tension: 0.4,
                        borderWidth: 2
                    }
                }
            };

            // Bitcoin Chart
            const btcCtx = document.getElementById('btcChart').getContext('2d');
            btcChart = new Chart(btcCtx, {
                type: 'line',
                data: {
                    labels: [],
                    fullTimestamps: [],
                    datasets: [{
                        data: [],
                        borderColor: '#f7931e',
                        backgroundColor: 'rgba(247, 147, 30, 0.1)',
                        fill: true,
                        borderWidth: 2
                    }]
                },
                options: chartOptions
            });

            // Ethereum Chart
            const ethCtx = document.getElementById('ethChart').getContext('2d');
            ethChart = new Chart(ethCtx, {
                type: 'line',
                data: {
                    labels: [],
                    fullTimestamps: [],
                    datasets: [{
                        data: [],
                        borderColor: '#627eea',
                        backgroundColor: 'rgba(98, 126, 234, 0.1)',
                        fill: true,
                        borderWidth: 2
                    }]
                },
                options: chartOptions
            });
            
            // Generate initial historical data
            generateHistoricalData();
        }

        function generateHistoricalData() {
            const now = new Date();
            const ranges = {
                '1h': { minutes: 60, interval: 1 },
                '4h': { minutes: 240, interval: 5 },
                '24h': { minutes: 1440, interval: 60 },
                '7d': { minutes: 10080, interval: 420 },
                '30d': { minutes: 43200, interval: 1800 }
            };
            
            Object.keys(ranges).forEach(range => {
                const { minutes, interval } = ranges[range];
                const points = Math.floor(minutes / interval);
                
                historicalData.BTC[range] = [];
                historicalData.ETH[range] = [];
                
                let btcBasePrice = 43500;
                let ethBasePrice = 2600;
                
                for (let i = points; i >= 0; i--) {
                    const timestamp = new Date(now.getTime() - (i * interval * 60000));
                    
                    // Generate realistic price movements
                    const btcChange = (Math.random() - 0.5) * 200;
                    const ethChange = (Math.random() - 0.5) * 50;
                    
                    btcBasePrice += btcChange;
                    ethBasePrice += ethChange;
                    
                    historicalData.BTC[range].push({
                        price: Math.max(btcBasePrice, 30000),
                        timestamp: timestamp
                    });
                    
                    historicalData.ETH[range].push({
                        price: Math.max(ethBasePrice, 1500),
                        timestamp: timestamp
                    });
                }
            });
        }

        function changeTimeRange(range) {
            currentTimeRange = range;
            
            // Update button states
            document.querySelectorAll('.time-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('text-gray-300');
            });
            event.target.classList.add('bg-blue-600', 'text-white');
            event.target.classList.remove('text-gray-300');
            
            // Update time range labels
            const rangeLabels = {
                '1h': 'Last 1 Hour',
                '4h': 'Last 4 Hours', 
                '24h': 'Last 24 Hours',
                '7d': 'Last 7 Days',
                '30d': 'Last 30 Days'
            };
            
            document.getElementById('btcTimeRange').textContent = rangeLabels[range];
            document.getElementById('ethTimeRange').textContent = rangeLabels[range];
            
            // Update charts with historical data
            updateChartsWithRange(range);
        }

        function updateChartsWithRange(range) {
            const btcData = historicalData.BTC[range] || [];
            const ethData = historicalData.ETH[range] || [];
            
            // Clear existing data
            btcChart.data.labels = [];
            btcChart.data.fullTimestamps = [];
            btcChart.data.datasets[0].data = [];
            
            ethChart.data.labels = [];
            ethChart.data.fullTimestamps = [];
            ethChart.data.datasets[0].data = [];
            
            // Add historical data
            btcData.forEach(point => {
                const shortLabel = formatTimeLabel(point.timestamp, range);
                const fullTimestamp = point.timestamp.toLocaleString();
                
                btcChart.data.labels.push(shortLabel);
                btcChart.data.fullTimestamps.push(fullTimestamp);
                btcChart.data.datasets[0].data.push(point.price);
            });
            
            ethData.forEach(point => {
                const shortLabel = formatTimeLabel(point.timestamp, range);
                const fullTimestamp = point.timestamp.toLocaleString();
                
                ethChart.data.labels.push(shortLabel);
                ethChart.data.fullTimestamps.push(fullTimestamp);
                ethChart.data.datasets[0].data.push(point.price);
            });
            
            // Update Y-axis scaling
            updateChartScaling();
            
            btcChart.update('none');
            ethChart.update('none');
        }

        function updateChartColors() {
            // Update Bitcoin chart colors based on price trend
            const btcPrices = btcChart.data.datasets[0].data;
            if (btcPrices.length >= 2) {
                const btcTrend = btcPrices[btcPrices.length - 1] - btcPrices[btcPrices.length - 2];
                if (btcTrend > 0) {
                    btcChart.data.datasets[0].borderColor = '#22c55e'; // Green for up
                    btcChart.data.datasets[0].backgroundColor = 'rgba(34, 197, 94, 0.1)';
                } else {
                    btcChart.data.datasets[0].borderColor = '#ef4444'; // Red for down
                    btcChart.data.datasets[0].backgroundColor = 'rgba(239, 68, 68, 0.1)';
                }
            }
            
            // Update Ethereum chart colors based on price trend
            const ethPrices = ethChart.data.datasets[0].data;
            if (ethPrices.length >= 2) {
                const ethTrend = ethPrices[ethPrices.length - 1] - ethPrices[ethPrices.length - 2];
                if (ethTrend > 0) {
                    ethChart.data.datasets[0].borderColor = '#22c55e'; // Green for up
                    ethChart.data.datasets[0].backgroundColor = 'rgba(34, 197, 94, 0.1)';
                } else {
                    ethChart.data.datasets[0].borderColor = '#ef4444'; // Red for down
                    ethChart.data.datasets[0].backgroundColor = 'rgba(239, 68, 68, 0.1)';
                }
            }
            
            btcChart.update('none');
            ethChart.update('none');
        }

        function formatTimeLabel(timestamp, range) {
            if (range === '7d' || range === '30d') {
                return timestamp.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            } else if (range === '24h') {
                return timestamp.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
            } else {
                return timestamp.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
            }
        }

        function updateChartScaling() {
            // Bitcoin chart scaling
            const btcPrices = btcChart.data.datasets[0].data;
            if (btcPrices.length > 0) {
                const btcMin = Math.min(...btcPrices);
                const btcMax = Math.max(...btcPrices);
                const btcPadding = (btcMax - btcMin) * 0.05;
                
                btcChart.options.scales.y.min = btcMin - btcPadding;
                btcChart.options.scales.y.max = btcMax + btcPadding;
            }
            
            // Ethereum chart scaling
            const ethPrices = ethChart.data.datasets[0].data;
            if (ethPrices.length > 0) {
                const ethMin = Math.min(...ethPrices);
                const ethMax = Math.max(...ethPrices);
                const ethPadding = (ethMax - ethMin) * 0.05;
                
                ethChart.options.scales.y.min = ethMin - ethPadding;
                ethChart.options.scales.y.max = ethMax + ethPadding;
            }
        }

        function updateCharts() {
            const now = new Date();
            
            // Update current price data in historical data
            if (historicalData.BTC[currentTimeRange] && historicalData.ETH[currentTimeRange]) {
                // Add new data point to current time range
                const btcData = historicalData.BTC[currentTimeRange];
                const ethData = historicalData.ETH[currentTimeRange];
                
                btcData.push({
                    price: cryptoData.BTC.price,
                    timestamp: now
                });
                
                ethData.push({
                    price: cryptoData.ETH.price,
                    timestamp: now
                });
                
                // Keep appropriate number of data points based on time range
                const maxPoints = chartDataPoints[currentTimeRange] || 60;
                if (btcData.length > maxPoints) {
                    btcData.shift();
                    ethData.shift();
                }
                
                // Update charts with current range and dynamic colors
                updateChartsWithRange(currentTimeRange);
                updateChartColors();
            }
            
            // Update price history for RSI calculations
            priceHistory.BTC.push(cryptoData.BTC.price);
            priceHistory.ETH.push(cryptoData.ETH.price);
            
            if (priceHistory.BTC.length > 50) {
                priceHistory.BTC.shift();
                priceHistory.ETH.shift();
            }
        }

        function generateAIPredictions() {
            // Advanced AI-based prediction algorithm using multiple factors
            ['BTC', 'ETH'].forEach(crypto => {
                const currentPrice = cryptoData[crypto].price;
                const change24h = cryptoData[crypto].change;
                const volume = cryptoData[crypto].volume;
                const marketCap = cryptoData[crypto].marketCap;
                
                // Calculate momentum indicators
                const momentum = change24h / 100;
                const volumeWeight = Math.min(volume / 10, 1); // Normalize volume impact
                const volatility = Math.abs(change24h) / 100;
                
                // AI prediction model factors
                const trendFactor = momentum * 0.4;
                const volumeFactor = volumeWeight * 0.3;
                const marketCapFactor = (marketCap > 500 ? 0.2 : 0.1) * 0.2;
                const randomFactor = (Math.random() - 0.5) * 0.1;
                
                // Calculate predictions
                const basePrediction = trendFactor + volumeFactor + marketCapFactor + randomFactor;
                
                predictions[crypto] = {
                    next1h: currentPrice * (1 + basePrediction * 0.1),
                    next24h: currentPrice * (1 + basePrediction * 0.5),
                    next7d: currentPrice * (1 + basePrediction * 2),
                    confidence: Math.min(Math.max(60 + (volumeWeight * 30) - (volatility * 20), 45), 95),
                    trend: basePrediction > 0.02 ? 'bullish' : basePrediction < -0.02 ? 'bearish' : 'neutral'
                };
            });
        }

        function updateAnalysis() {
            // Update technical indicators with real calculations
            const btcRSI = calculateRSI('BTC');
            const ethRSI = calculateRSI('ETH');
            
            document.getElementById('btcRSI').textContent = btcRSI.toFixed(1);
            document.getElementById('btcSupport').textContent = `$${(cryptoData.BTC.price * 0.95).toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('btcResistance').textContent = `$${(cryptoData.BTC.price * 1.05).toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('btcSignal').textContent = predictions.BTC.trend.toUpperCase();
            document.getElementById('btcSignal').className = predictions.BTC.trend === 'bullish' ? 'text-green-400 font-semibold' : 
                                                            predictions.BTC.trend === 'bearish' ? 'text-red-400 font-semibold' : 'text-yellow-400 font-semibold';
            
            document.getElementById('ethRSI').textContent = ethRSI.toFixed(1);
            document.getElementById('ethSupport').textContent = `$${(cryptoData.ETH.price * 0.95).toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('ethResistance').textContent = `$${(cryptoData.ETH.price * 1.05).toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('ethSignal').textContent = predictions.ETH.trend.toUpperCase();
            document.getElementById('ethSignal').className = predictions.ETH.trend === 'bullish' ? 'text-green-400 font-semibold' : 
                                                            predictions.ETH.trend === 'bearish' ? 'text-red-400 font-semibold' : 'text-yellow-400 font-semibold';
            
            // Update AI predictions display
            updatePredictionsDisplay();
        }

        function updatePredictionsDisplay() {
            // Bitcoin predictions
            document.getElementById('btcPred1h').textContent = `$${predictions.BTC.next1h.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('btcPred24h').textContent = `$${predictions.BTC.next24h.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('btcPred7d').textContent = `$${predictions.BTC.next7d.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('btcConfidence').textContent = `${predictions.BTC.confidence.toFixed(0)}%`;
            
            // Ethereum predictions
            document.getElementById('ethPred1h').textContent = `$${predictions.ETH.next1h.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('ethPred24h').textContent = `$${predictions.ETH.next24h.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('ethPred7d').textContent = `$${predictions.ETH.next7d.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            document.getElementById('ethConfidence').textContent = `${predictions.ETH.confidence.toFixed(0)}%`;
        }

        function calculateRSI(crypto) {
            const history = priceHistory[crypto];
            if (history.length < 14) return 50; // Default RSI
            
            const gains = [];
            const losses = [];
            
            for (let i = 1; i < Math.min(history.length, 14); i++) {
                const change = history[i] - history[i-1];
                if (change > 0) {
                    gains.push(change);
                    losses.push(0);
                } else {
                    gains.push(0);
                    losses.push(Math.abs(change));
                }
            }
            
            const avgGain = gains.reduce((a, b) => a + b, 0) / gains.length;
            const avgLoss = losses.reduce((a, b) => a + b, 0) / losses.length;
            
            if (avgLoss === 0) return 100;
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        }

        function updateSentiment() {
            const sentiment = Math.floor(Math.random() * 100);
            document.getElementById('sentimentScore').textContent = sentiment;
            
            const circle = document.getElementById('sentimentCircle');
            const label = document.getElementById('sentimentLabel');
            
            if (sentiment < 25) {
                circle.className = 'w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 bg-red-600';
                label.textContent = 'Extreme Fear';
            } else if (sentiment < 45) {
                circle.className = 'w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 bg-orange-500';
                label.textContent = 'Fear';
            } else if (sentiment < 55) {
                circle.className = 'w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 bg-yellow-500';
                label.textContent = 'Neutral';
            } else if (sentiment < 75) {
                circle.className = 'w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 bg-green-500';
                label.textContent = 'Greed';
            } else {
                circle.className = 'w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 bg-green-600';
                label.textContent = 'Extreme Greed';
            }
        }

        function addHolding(event) {
            event.preventDefault();
            const form = event.target;
            
            const holding = {
                id: Date.now(),
                crypto: form.cryptoSelect.value,
                amount: parseFloat(form.amount.value),
                buyPrice: parseFloat(form.buyPrice.value),
                timestamp: new Date().toLocaleString()
            };
            
            portfolio.push(holding);
            form.reset();
            updatePortfolio();
            saveData();
            
            showNotification(`Added ${holding.amount} ${holding.crypto} to portfolio!`, 'success');
        }

        function updatePortfolio() {
            const holdingsList = document.getElementById('holdingsList');
            
            if (portfolio.length === 0) {
                holdingsList.innerHTML = '<p class="text-gray-400 text-center py-8">No holdings yet. Add some crypto to get started!</p>';
                document.getElementById('totalValue').textContent = '$0.00';
                document.getElementById('totalPnL').textContent = '$0.00 (0.00%)';
                document.getElementById('bestPerformer').textContent = '--';
                return;
            }
            
            let totalValue = 0;
            let totalCost = 0;
            let bestPerformer = { crypto: '', pnl: -Infinity };
            
            holdingsList.innerHTML = portfolio.map(holding => {
                const currentPrice = cryptoData[holding.crypto].price;
                const currentValue = holding.amount * currentPrice;
                const cost = holding.amount * holding.buyPrice;
                const pnl = currentValue - cost;
                const pnlPercent = (pnl / cost) * 100;
                
                totalValue += currentValue;
                totalCost += cost;
                
                if (pnlPercent > bestPerformer.pnl) {
                    bestPerformer = { crypto: holding.crypto, pnl: pnlPercent };
                }
                
                return `
                    <div class="p-3 bg-gray-700 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-white">${holding.amount} ${holding.crypto}</span>
                            <button onclick="removeHolding(${holding.id})" class="text-red-400 hover:text-red-300 text-sm">Remove</button>
                        </div>
                        <div class="text-sm text-gray-300">
                            <div class="flex justify-between">
                                <span>Value:</span>
                                <span>$${currentValue.toFixed(2)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>P&L:</span>
                                <span class="${pnl >= 0 ? 'text-green-400' : 'text-red-400'}">
                                    ${pnl >= 0 ? '+' : ''}$${pnl.toFixed(2)} (${pnlPercent.toFixed(2)}%)
                                </span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            const totalPnL = totalValue - totalCost;
            const totalPnLPercent = totalCost > 0 ? (totalPnL / totalCost) * 100 : 0;
            
            document.getElementById('totalValue').textContent = `$${totalValue.toFixed(2)}`;
            document.getElementById('totalPnL').textContent = `${totalPnL >= 0 ? '+' : ''}$${totalPnL.toFixed(2)} (${totalPnLPercent.toFixed(2)}%)`;
            document.getElementById('totalPnL').className = `text-xl font-bold ${totalPnL >= 0 ? 'text-green-400' : 'text-red-400'}`;
            document.getElementById('bestPerformer').textContent = bestPerformer.crypto ? `${bestPerformer.crypto} (+${bestPerformer.pnl.toFixed(2)}%)` : '--';
        }

        function removeHolding(id) {
            portfolio = portfolio.filter(holding => holding.id !== id);
            updatePortfolio();
            saveData();
            showNotification('Holding removed from portfolio', 'success');
        }

        function createAlert(event) {
            event.preventDefault();
            const form = event.target;
            
            const alert = {
                id: Date.now(),
                crypto: form.alertCrypto.value,
                type: form.alertType.value,
                price: parseFloat(form.alertPrice.value),
                timestamp: new Date().toLocaleString(),
                triggered: false
            };
            
            alerts.push(alert);
            form.reset();
            updateAlertsList();
            saveData();
            
            showNotification(`Alert created for ${alert.crypto}!`, 'success');
        }

        function updateAlertsList() {
            const alertsList = document.getElementById('alertsList');
            const activeAlerts = alerts.filter(alert => !alert.triggered);
            
            if (activeAlerts.length === 0) {
                alertsList.innerHTML = '<p class="text-gray-400 text-center py-8">No active alerts. Create one to get notified!</p>';
                return;
            }
            
            alertsList.innerHTML = activeAlerts.map(alert => `
                <div class="p-3 bg-gray-700 rounded-lg">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold text-white">${alert.crypto} ${alert.type} $${alert.price}</span>
                        <button onclick="removeAlert(${alert.id})" class="text-red-400 hover:text-red-300 text-sm">Remove</button>
                    </div>
                    <div class="text-xs text-gray-400">Created: ${alert.timestamp}</div>
                </div>
            `).join('');
        }

        function removeAlert(id) {
            alerts = alerts.filter(alert => alert.id !== id);
            updateAlertsList();
            saveData();
            showNotification('Alert removed', 'success');
        }

        function checkAlerts() {
            alerts.forEach(alert => {
                if (alert.triggered) return;
                
                const currentPrice = cryptoData[alert.crypto].price;
                let triggered = false;
                
                if (alert.type === 'above' && currentPrice >= alert.price) {
                    triggered = true;
                } else if (alert.type === 'below' && currentPrice <= alert.price) {
                    triggered = true;
                }
                
                if (triggered) {
                    alert.triggered = true;
                    triggerAlert(alert, currentPrice);
                }
            });
        }

        function triggerAlert(alert, currentPrice) {
            const message = `${alert.crypto} is now ${alert.type} $${alert.price}! Current price: $${currentPrice.toFixed(2)}`;
            showNotification(message, 'success');
            
            // Add to alert history
            const alertHistory = document.getElementById('alertHistory');
            const historyItem = document.createElement('div');
            historyItem.className = 'p-3 bg-gray-700 rounded-lg border-l-4 border-yellow-500';
            historyItem.innerHTML = `
                <div class="font-semibold text-white">${message}</div>
                <div class="text-xs text-gray-400 mt-1">${new Date().toLocaleString()}</div>
            `;
            
            if (alertHistory.querySelector('p')) {
                alertHistory.innerHTML = '';
            }
            alertHistory.insertBefore(historyItem, alertHistory.firstChild);
            
            updateAlertsList();
            saveData();
        }

        function startAutoUpdate() {
            let countdown = 30;
            
            updateInterval = setInterval(() => {
                fetchCryptoData();
                countdown = 30;
            }, 30000);
            
            countdownInterval = setInterval(() => {
                countdown--;
                document.getElementById('countdown').textContent = countdown;
                if (countdown <= 0) countdown = 30;
            }, 1000);
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 ${
                type === 'success' ? 'bg-green-600' : type === 'warning' ? 'bg-yellow-600' : 'bg-red-600'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function saveData() {
            const data = {
                portfolio,
                alerts,
                priceHistory
            };
            localStorage.setItem('cryptoTrackerData', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('cryptoTrackerData');
            if (saved) {
                const data = JSON.parse(saved);
                portfolio = data.portfolio || [];
                alerts = data.alerts || [];
                priceHistory = data.priceHistory || { BTC: [], ETH: [] };
                
                updatePortfolio();
                updateAlertsList();
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9948fb5e91e6c908',t:'MTc2MTQ3MTUxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
